"use strict";(globalThis.webpackChunkbook=globalThis.webpackChunkbook||[]).push([[1925],{6947:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"ros2-fundamentals/building-ros2-packages-with-python","title":"Building ROS 2 Packages with Python","description":"In this section, you will learn the fundamental process of creating and building a ROS 2 package using Python. ROS 2 packages are the primary way to organize your code, making it modular, reusable, and easy to share.","source":"@site/docs/ros2-fundamentals/03-building-ros2-packages-with-python.mdx","sourceDirName":"ros2-fundamentals","slug":"/ros2-fundamentals/building-ros2-packages-with-python","permalink":"/ai-native-book/docs/ros2-fundamentals/building-ros2-packages-with-python","draft":false,"unlisted":false,"editUrl":"https://github.com/bilalmk/ai-native-book/tree/main/docs/ros2-fundamentals/03-building-ros2-packages-with-python.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_label":"Building ROS 2 Packages with Python","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Nodes, Topics, Services, and Actions","permalink":"/ai-native-book/docs/ros2-fundamentals/nodes-topics-services-actions"},"next":{"title":"Launch Files & Parameters","permalink":"/ai-native-book/docs/ros2-fundamentals/launch-files-parameter-management"}}');var s=a(4848),t=a(8453);const o={sidebar_label:"Building ROS 2 Packages with Python",sidebar_position:3},r="Building ROS 2 Packages with Python",c={},l=[{value:"Learning Objectives",id:"learning-objectives",level:3},{value:"The Anatomy of a ROS 2 Package",id:"the-anatomy-of-a-ros-2-package",level:2},{value:"Step 1: Creating a ROS 2 Package",id:"step-1-creating-a-ros-2-package",level:2},{value:"Step 2: Understanding the Package Structure",id:"step-2-understanding-the-package-structure",level:2},{value:"Step 3: Configuring <code>package.xml</code>",id:"step-3-configuring-packagexml",level:2},{value:"Step 4: Configuring <code>setup.py</code>",id:"step-4-configuring-setuppy",level:2},{value:"Step 5: Building the Package",id:"step-5-building-the-package",level:2},{value:"Step 6: Sourcing and Running the Node",id:"step-6-sourcing-and-running-the-node",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"building-ros-2-packages-with-python",children:"Building ROS 2 Packages with Python"})}),"\n",(0,s.jsx)(n.p,{children:"In this section, you will learn the fundamental process of creating and building a ROS 2 package using Python. ROS 2 packages are the primary way to organize your code, making it modular, reusable, and easy to share."}),"\n",(0,s.jsx)(n.h3,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,s.jsx)(n.p,{children:"After completing this section, you will be able to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Create a new ROS 2 Python package."}),"\n",(0,s.jsx)(n.li,{children:"Understand the directory structure of a typical ROS 2 package."}),"\n",(0,s.jsxs)(n.li,{children:["Configure the ",(0,s.jsx)(n.code,{children:"package.xml"})," and ",(0,s.jsx)(n.code,{children:"setup.py"})," files."]}),"\n",(0,s.jsxs)(n.li,{children:["Build your package using ",(0,s.jsx)(n.code,{children:"colcon"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Run a Python node from your custom package."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"the-anatomy-of-a-ros-2-package",children:"The Anatomy of a ROS 2 Package"}),"\n",(0,s.jsxs)(n.p,{children:["A ROS 2 package is a directory containing your source code, launch files, configuration, and a ",(0,s.jsx)(n.code,{children:"package.xml"})," manifest file. This manifest file contains metadata about the package, such as its name, version, dependencies, and author information. For Python packages, it also includes a ",(0,s.jsx)(n.code,{children:"setup.py"})," file to manage installation."]}),"\n",(0,s.jsx)(n.p,{children:"[Diagram: A high-level view of a ROS 2 workspace containing multiple packages, showing how they are isolated but can communicate.]"}),"\n",(0,s.jsx)(n.h2,{id:"step-1-creating-a-ros-2-package",children:"Step 1: Creating a ROS 2 Package"}),"\n",(0,s.jsxs)(n.p,{children:["The first step is to create a new package. ROS 2 provides a command-line tool to automate this process. Navigate to your workspace's ",(0,s.jsx)(n.code,{children:"src"})," directory and run the following command:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 pkg create --build-type ament_python --node-name my_python_node my_python_pkg\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This command creates a new directory named ",(0,s.jsx)(n.code,{children:"my_python_pkg"})," with the basic structure for a Python-based ROS 2 package. It also creates a simple executable node named ",(0,s.jsx)(n.code,{children:"my_python_node"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"step-2-understanding-the-package-structure",children:"Step 2: Understanding the Package Structure"}),"\n",(0,s.jsx)(n.p,{children:"Let's examine the files and directories that were just created:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"my_python_pkg/\n\x1c\ufffd\ufffd package.xml\n\x1c\ufffd\ufffd setup.py\n\x1c\ufffd\ufffd setup.cfg\n\x1c\ufffd\ufffd my_python_pkg/\n\x02   \x1c\ufffd\ufffd __init__.py\n\x02   \x14\ufffd\ufffd my_python_node.py\n\x14\ufffd\ufffd resource/\n    \x14\ufffd\ufffd my_python_pkg\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"package.xml"})}),": This is the manifest file. It contains meta-information about the package."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"setup.py"})}),": This is the build script for Python packages. It describes how to install the package and its modules."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"setup.cfg"})}),": A configuration file for ",(0,s.jsx)(n.code,{children:"setuptools"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"my_python_pkg/"})}),": A Python sub-directory that contains your package's modules. The ",(0,s.jsx)(n.code,{children:"my_python_node.py"})," file holds the source code for your ROS 2 node."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"resource/"})}),": This directory is used to place a marker file so that ROS 2 can find your package."]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"step-3-configuring-packagexml",children:["Step 3: Configuring ",(0,s.jsx)(n.code,{children:"package.xml"})]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"package.xml"})," file describes your package's dependencies and metadata. A minimal example looks like this:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<package format="3">\n  <name>my_python_pkg</name>\n  <version>0.0.0</version>\n  <description>A simple Python package for ROS 2</description>\n  <maintainer email="user@example.com">Your Name</maintainer>\n  <license>Apache License 2.0</license>\n\n  <depend>rclpy</depend>\n\n  <test_depend>ament_copyright</test_depend>\n  <test_depend>ament_flake8</test_depend>\n  <test_depend>ament_pep257</test_depend>\n  <test_depend>python3-pytest</test_depend>\n\n  <export>\n    <build_type>ament_python</build_type>\n  </export>\n</package>\n'})}),"\n",(0,s.jsx)(n.p,{children:"Key tags to note are:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<name>"}),": The name of your package."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<version>"}),": The version number."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<description>"}),": A brief summary of what the package does."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<maintainer>"}),": The person responsible for the package."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<license>"}),": The software license for your code."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<depend>"}),": These tags declare dependencies on other ROS 2 packages. ",(0,s.jsx)(n.code,{children:"rclpy"})," is the ROS 2 client library for Python."]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"step-4-configuring-setuppy",children:["Step 4: Configuring ",(0,s.jsx)(n.code,{children:"setup.py"})]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"setup.py"})," file is essential for Python packages. It tells ",(0,s.jsx)(n.code,{children:"colcon"})," how to build and install your code, including where to find your executable nodes."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\n\npackage_name = 'my_python_pkg'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='Your Name',\n    maintainer_email='user@example.com',\n    description='A simple Python package for ROS 2',\n    license='Apache License 2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'my_node = my_python_pkg.my_python_node:main'\n        ],\n    },\n)\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The most important part here is the ",(0,s.jsx)(n.code,{children:"entry_points"})," dictionary. It maps the name of your executable (",(0,s.jsx)(n.code,{children:"my_node"}),") to the location of the ",(0,s.jsx)(n.code,{children:"main"})," function in your Python script. This allows you to run your node using ",(0,s.jsx)(n.code,{children:"ros2 run"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"step-5-building-the-package",children:"Step 5: Building the Package"}),"\n",(0,s.jsxs)(n.p,{children:["Now that your package is set up, you can build it. Navigate to the root of your ROS 2 workspace and run ",(0,s.jsx)(n.code,{children:"colcon build"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"colcon build --packages-select my_python_pkg\n"})}),"\n",(0,s.jsxs)(n.p,{children:["This command will compile your package and install the necessary files into the ",(0,s.jsx)(n.code,{children:"install"})," directory in your workspace. If the build is successful, you will see a confirmation message."]}),"\n",(0,s.jsxs)(n.p,{children:["[Illustration: A terminal window showing the output of a successful ",(0,s.jsx)(n.code,{children:"colcon build"}),".]"]}),"\n",(0,s.jsx)(n.h2,{id:"step-6-sourcing-and-running-the-node",children:"Step 6: Sourcing and Running the Node"}),"\n",(0,s.jsx)(n.p,{children:"Before you can run your new node, you need to source your workspace's setup file. This adds your package to the ROS 2 environment, allowing it to be found."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# In Linux/macOS\nsource install/setup.bash\n\n# In Windows\ncall install/setup.bat\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Finally, you can run your node using ",(0,s.jsx)(n.code,{children:"ros2 run"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 run my_python_pkg my_node\n"})}),"\n",(0,s.jsx)(n.p,{children:"If everything is configured correctly, your Python node will start executing."}),"\n",(0,s.jsxs)(n.p,{children:["[Example: The expected output of the ",(0,s.jsx)(n.code,{children:"my_python_node"}),' when it runs, such as a "Hello, ROS 2!" message being printed to the console.]']}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(n.p,{children:"You have successfully created, configured, built, and run a ROS 2 package using Python. This foundational skill is crucial for developing more complex robotic applications. By organizing your code into packages, you embrace the modularity and reusability that make ROS 2 a powerful framework."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>o,x:()=>r});var i=a(6540);const s={},t=i.createContext(s);function o(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);